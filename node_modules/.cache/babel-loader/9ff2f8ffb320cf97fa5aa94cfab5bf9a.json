{"ast":null,"code":"import _defineProperty from\"/home/bourq/Development/code/phase2/project/lolbuilderpro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bourq/Development/code/phase2/project/lolbuilderpro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bourq/Development/code/phase2/project/lolbuilderpro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{useHistory}from'react-router-dom';import{makeStyles}from'@material-ui/core/styles';import{Button}from'@material-ui/core';import TextField from'@material-ui/core/TextField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{'& .MuiTextField-root':{margin:theme.spacing(1),width:200}}};});var Login=function Login(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser,loginValidated=_ref.loginValidated,setLoginValidated=_ref.setLoginValidated;var classes=useStyles();var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),usernameError=_useState2[0],setUsernameError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),passwordError=_useState4[0],setPasswordError=_useState4[1];var handleCreateLogin=function handleCreateLogin(){history.push('/createlogin');};var handleChange=function handleChange(e){setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();fetch('http://localhost:3000/users').then(function(res){return res.json();}).then(function(data){var findID=data.find(function(user){return user.username===currentUser.username;});setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{id:findID.id}));});fetch('http://localhost:3000/users').then(function(res){return res.json();}).then(function(data){if(currentUser.username===\"\"||currentUser.username===undefined){alert('Please input a username');setLoginValidated(false);}else{var foundUser=data.find(function(user){if(user.username===currentUser.username){setUsernameError(false);return user.username===currentUser.username;}else if(user.username!==currentUser.username){history.push('/login');setLoginValidated(false);setUsernameError(true);}else{history.push('/login');setLoginValidated(false);setUsernameError(true);}});if(foundUser===\"\"||foundUser===undefined){alert('That user does not exist. Please create a new login.');}else{if(currentUser.password===undefined||currentUser.password===\"\"){alert('Please input a password');history.push('/login');setLoginValidated(false);setPasswordError(true);}else if(currentUser.password==foundUser.password){setLoginValidated(true);setUsernameError(false);setPasswordError(false);console.log('working');history.push('/');}}}});};return/*#__PURE__*/_jsx(\"form\",{id:\"loginForm\",className:classes.root,noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",style:usernameError===true?{height:'37%'}:{height:'31%'},children:[/*#__PURE__*/_jsx(TextField,{error:usernameError===true?true:false,id:\"filled-error\",label:\"username\",name:\"username\",defaultValue:currentUser.username,helperText:usernameError===true?\"That user does not exist. Please create a new login.\":null,variant:\"filled\",onChange:handleChange}),/*#__PURE__*/_jsx(TextField,{error:passwordError===true?true:false,id:\"filled-error-helper-text\",label:\"password\",name:\"password\",defaultValue:currentUser.password,helperText:passwordError===true?\"Incorrect entry. Please enter a valid password.\":null,variant:\"outlined\",onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-buttons\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){return handleCreateLogin();},children:\"Create Login\"})]})]})})});};export default Login;","map":{"version":3,"sources":["/home/bourq/Development/code/phase2/project/lolbuilderpro/src/Login.js"],"names":["useState","useHistory","makeStyles","Button","TextField","useStyles","theme","root","margin","spacing","width","Login","currentUser","setCurrentUser","loginValidated","setLoginValidated","classes","history","usernameError","setUsernameError","passwordError","setPasswordError","handleCreateLogin","push","handleChange","e","target","name","value","handleSubmit","preventDefault","fetch","then","res","json","data","findID","find","user","username","id","undefined","alert","foundUser","password","console","log","height"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: 200,\n      },\n    },\n  }));\n\nlet Login = ({ currentUser, setCurrentUser, loginValidated, setLoginValidated }) => {\n    const classes = useStyles();   \n    const history = useHistory()\n    const [usernameError, setUsernameError] = useState(false)\n    const [passwordError, setPasswordError] = useState(false)\n    \n    let handleCreateLogin = () => {\n        history.push('/createlogin')\n    }\n\n    let handleChange = (e) => {\n        setCurrentUser({\n            ...currentUser,\n            [e.target.name] : e.target.value\n            \n        })\n    }\n\n    let handleSubmit = (e) => {\n        e.preventDefault()\n        fetch('http://localhost:3000/users')\n        .then(res => res.json())\n        .then(data => {\n            let findID = data.find(user => {\n                return user.username === currentUser.username\n            })\n            setCurrentUser({\n                ...currentUser,\n                id: findID.id\n            })\n        })\n\n\n        fetch('http://localhost:3000/users')\n        .then(res => res.json())\n        .then(data => {\n            if (currentUser.username===\"\" || currentUser.username===undefined){\n                alert('Please input a username')\n                setLoginValidated(false)\n            } else {\n                let foundUser = data.find(user => {\n                    if(user.username===currentUser.username){\n                        setUsernameError(false)\n                        return user.username === currentUser.username\n                    } else if (user.username !== currentUser.username) {\n                        history.push('/login')\n                        setLoginValidated(false)\n                        setUsernameError(true)\n                    } else {\n                        history.push('/login')\n                        setLoginValidated(false)\n                        setUsernameError(true)  \n                    }\n                })\n                \n                if (foundUser===\"\" || foundUser=== undefined) {\n                    alert('That user does not exist. Please create a new login.')\n                } else {\n                    if (currentUser.password === undefined || currentUser.password === \"\") {\n                        alert('Please input a password')\n                        history.push('/login')\n                        setLoginValidated(false)\n                        setPasswordError(true)\n                    } else if (currentUser.password==foundUser.password) {\n                        setLoginValidated(true)\n                        setUsernameError(false)\n                        setPasswordError(false)\n                        console.log('working')\n                        history.push('/')\n                    }      \n                }        \n            }\n        })\n    }\n\n    return (\n        <form id=\"loginForm\" className={classes.root} noValidate autoComplete=\"off\" onSubmit={handleSubmit}>\n            <div className=\"login\">\n                    <div className=\"login-card\"\n                        style={usernameError=== true ? {height:'37%'} : {height:'31%'}}\n                    >\n                        <TextField\n                            error={usernameError===true ? true : false}\n                            id=\"filled-error\"\n                            label=\"username\"\n                            name=\"username\"\n                            defaultValue={currentUser.username}\n                            helperText={usernameError===true ? \"That user does not exist. Please create a new login.\" : null}\n                            variant=\"filled\"\n                            onChange={handleChange}\n                        />\n                        <TextField\n                            error={passwordError===true ? true : false}\n                            id=\"filled-error-helper-text\"\n                            label=\"password\"\n                            name=\"password\"\n                            defaultValue={currentUser.password}\n                            helperText={passwordError===true ? \"Incorrect entry. Please enter a valid password.\" : null}\n                            variant=\"outlined\"\n                            onChange={handleChange}\n                        />\n                        <div className=\"login-buttons\">\n                            <Button variant=\"contained\" color=\"primary\" type=\"submit\" >Submit</Button>\n                            <Button variant=\"contained\" color=\"primary\" onClick={() => handleCreateLogin()}>Create Login</Button>\n                        </div>\n                    </div>\n            </div>\n        </form>\n    )\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}