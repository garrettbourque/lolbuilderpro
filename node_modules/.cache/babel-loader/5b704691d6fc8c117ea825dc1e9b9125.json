{"ast":null,"code":"import _slicedToArray from\"/home/bourq/Development/code/phase2/project/lolbuilderpro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{React,useState,useEffect}from'react';import Search from\"./Search\";import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser,selectedMap=_ref.selectedMap,setSelectedMap=_ref.setSelectedMap,selectedChampion=_ref.selectedChampion,setSelectedChampion=_ref.setSelectedChampion,selectedGameMode=_ref.selectedGameMode,setSelectedGameMode=_ref.setSelectedGameMode;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),leagueData=_useState2[0],setLeagueData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var history=useHistory();useEffect(function(){fetch(\"http://localhost:3000/users/\".concat(currentUser.id)).then(function(res){return res.json();}).then(function(userData){console.log(userData);if(userData.champion===undefined||userData.champion===\"\"){fetch('http://ddragon.leagueoflegends.com/cdn/11.12.1/data/en_US/champion.json').then(function(res){return res.json();}).then(function(data){setLeagueData(data.data);setSelectedChampion(Object.values(data.data)[Math.floor(Math.random()*Object.values(data.data).length)]);});}else{fetch('http://ddragon.leagueoflegends.com/cdn/11.12.1/data/en_US/champion.json').then(function(res){return res.json();}).then(function(data){setLeagueData(data.data);var foundChampion=Object.values(data.data).find(function(champion){console.log(champion.name);console.log(userData.champion);return champion.name===userData.champion;});console.log(foundChampion);setSelectedChampion(foundChampion);});}});},[setSelectedChampion]);var handleSelectChampion=function handleSelectChampion(champion){fetch(\"http://localhost:3000/users/\".concat(currentUser.id),{method:'PATCH',headers:{'Content-type':'application/json'},body:JSON.stringify({username:currentUser.username,password:currentUser.password,\"champion\":champion.name})}).then(function(res){return res.json();}).then(function(data){return setSelectedChampion(champion);});};//Select a filtered list of champs when entering a search\nvar champsToDisplay=Object.values(leagueData).filter(function(champ){return champ.name.toLowerCase().includes(searchTerm.toLowerCase());});var handleSelectGameMode=function handleSelectGameMode(){history.push('/selectgamemode');};var handleBuild=function handleBuild(){history.push('/play/'+selectedChampion.name);var handlePlay=function handlePlay(){history.push('/battle');};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-setup-container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Map:\"}),\" \",selectedMap]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Champion:\"}),\" \",selectedChampion.name,\" \",selectedChampion.title]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Game Mode:\"}),\" \",selectedGameMode]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"champion-viewer-container\",style:{backgroundImage:\"url(\\n                    http://ddragon.leagueoflegends.com/cdn/img/champion/loading/\".concat(selectedChampion.name,\"_0.jpg)\")},children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"selected-champion-info\",children:[selectedChampion.name,\" \",selectedChampion.title]}),/*#__PURE__*/_jsx(\"div\",{className:\"champion-description\",children:selectedChampion.blurb})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"select-game\",children:/*#__PURE__*/_jsx(\"button\",{className:\"select-game-button\",onClick:function onClick(){return handleSelectGameMode();},children:/*#__PURE__*/_jsx(\"em\",{children:\"Select Game Mode\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-card\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"build-button\",onClick:function onClick(){return handleBuild();},children:/*#__PURE__*/_jsx(\"em\",{children:\"Make a Build\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"play-button\",onClick:function onClick(){return handlePlay();},children:\"Play\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"new-builds-container\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Select your Champion\"}),/*#__PURE__*/_jsx(Search,{leagueData:true,searchTerm:searchTerm,onChangeSearch:setSearchTerm}),Object.values(champsToDisplay).map(function(champion){return/*#__PURE__*/_jsxs(\"div\",{className:\"champion-container\",onClick:function onClick(){return handleSelectChampion(champion);},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"champion-name\",children:champion.name}),/*#__PURE__*/_jsx(\"img\",{className:\"champion-image\",src:\"http://ddragon.leagueoflegends.com/cdn/11.12.1/img/champion/\".concat(champion.image.full),alt:\"broken\"})]},champion.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-information\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"Current User: \",currentUser.username,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:function onClick(){history.push('/login');setCurrentUser({username:\"\",password:\"\"});},children:\"Logout\"})]})]});};};export default Home;","map":{"version":3,"sources":["/home/bourq/Development/code/phase2/project/lolbuilderpro/src/Home.js"],"names":["React","useState","useEffect","Search","useHistory","Home","currentUser","setCurrentUser","selectedMap","setSelectedMap","selectedChampion","setSelectedChampion","selectedGameMode","setSelectedGameMode","leagueData","setLeagueData","searchTerm","setSearchTerm","history","fetch","id","then","res","json","userData","console","log","champion","undefined","data","Object","values","Math","floor","random","length","foundChampion","find","name","handleSelectChampion","method","headers","body","JSON","stringify","username","password","champsToDisplay","filter","champ","toLowerCase","includes","handleSelectGameMode","push","handleBuild","handlePlay","title","backgroundImage","blurb","map","image","full"],"mappings":"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","sourcesContent":["import { React, useState, useEffect } from 'react'\nimport Search from \"./Search\"\nimport { useHistory } from 'react-router-dom'\n\n\n\nlet Home = ({\n        currentUser, setCurrentUser, \n        selectedMap, setSelectedMap, \n        selectedChampion, setSelectedChampion, \n        selectedGameMode, setSelectedGameMode }) => {\n    const [leagueData, setLeagueData] = useState([])\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const history = useHistory()\n\n    useEffect(() => {\n        fetch(`http://localhost:3000/users/${currentUser.id}`)\n        .then(res=> res.json())\n        .then(userData => {\n            console.log(userData)\n            if(userData.champion===undefined || userData.champion===\"\"){\n                fetch('http://ddragon.leagueoflegends.com/cdn/11.12.1/data/en_US/champion.json')\n                .then(res => res.json())\n                .then(data => {\n                    setLeagueData(data.data)\n                    setSelectedChampion(Object.values(data.data)[Math.floor(Math.random() * Object.values(data.data).length)])\n                })\n            } else {\n                fetch('http://ddragon.leagueoflegends.com/cdn/11.12.1/data/en_US/champion.json')\n                .then(res => res.json())\n                .then(data => {\n                    setLeagueData(data.data)\n                    let foundChampion = Object.values(data.data).find(champion => {\n                        console.log(champion.name)\n                        console.log(userData.champion)\n                        return champion.name === userData.champion\n                    })\n                    console.log(foundChampion)\n                    setSelectedChampion(foundChampion)\n                })\n            }\n        })\n    },[setSelectedChampion])\n   \n    let handleSelectChampion = (champion) => {\n\n        fetch(`http://localhost:3000/users/${currentUser.id}`, {\n            method: 'PATCH', \n            headers: {'Content-type':'application/json'}, \n            body: JSON.stringify({\n                username: currentUser.username,\n                password: currentUser.password,\n                \"champion\": champion.name\n            })\n        })\n        .then(res => res.json())\n        .then(data => setSelectedChampion(champion))\n\n    }\n\n    //Select a filtered list of champs when entering a search\n    const champsToDisplay = Object.values(leagueData).filter((champ) =>\n      champ.name.toLowerCase().includes(searchTerm.toLowerCase())\n      ); \n\n    \n    let handleSelectGameMode = () => {\n        history.push('/selectgamemode')\n    }\n\n\n    let handleBuild = () => {     \n        history.push('/play/'+selectedChampion.name)\n\n    let handlePlay = () => {\n        history.push('/battle')\n\n    }\n\n    return (\n        <div className='main-container'>\n            <div className=\"game-setup-container\">\n                <div><b>Map:</b> {selectedMap}</div>\n                <div><b>Champion:</b> {selectedChampion.name} {selectedChampion.title}</div>\n                <div><b>Game Mode:</b> {selectedGameMode}</div>\n            </div>\n\n            <div className='action-container'>\n                <div className='champion-viewer-container' style={{backgroundImage: `url(\n                    http://ddragon.leagueoflegends.com/cdn/img/champion/loading/${selectedChampion.name}_0.jpg)`}}\n                >\n                    <h3 className=\"selected-champion-info\">{selectedChampion.name} {selectedChampion.title}</h3>\n                    <div className=\"champion-description\">{selectedChampion.blurb}</div>\n                </div>\n                <div className='play-container'>\n                    <div className=\"select-game\">\n                        <button className=\"select-game-button\" onClick={() => handleSelectGameMode()}>\n                            <em>Select Game Mode</em>\n                        </button>\n                    </div>\n                    <div className=\"play-card\">\n\n                        <button className=\"build-button\"onClick={() => handleBuild()}><em>Make a Build</em></button>\n\n                        <button className=\"play-button\" onClick={() => handlePlay()}>Play</button>\n\n                    </div>\n\n                </div>\n                <div className='new-builds-container'>\n                    <b>Select your Champion</b>\n                    <Search leagueData searchTerm={searchTerm} onChangeSearch={setSearchTerm}/>\n                    {Object.values(champsToDisplay).map(champion => {\n                    return (\n                        <div className=\"champion-container\" key={champion.id} onClick={() => handleSelectChampion(champion)}>\n                            <h3 className='champion-name'>{champion.name}</h3>\n                            <img \n                                className='champion-image' \n                                src={`http://ddragon.leagueoflegends.com/cdn/11.12.1/img/champion/${champion.image.full}`} \n                                alt=\"broken\"/>\n                        </div>\n                    )\n                    })}\n                </div>\n            </div>\n            <div className=\"user-information\">\n                <b>Current User: {currentUser.username} </b>\n                <button className=\"logout-button\" onClick={() => {\n                    history.push('/login')\n                    setCurrentUser({\n                        username: \"\",\n                        password: \"\"\n                    })\n                    }}>Logout</button>\n            </div>\n        </div>\n    )\n}\n        }\n\nexport default Home"]},"metadata":{},"sourceType":"module"}